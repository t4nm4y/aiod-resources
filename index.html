<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enable Strike-through Price On Collection Product Cards</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.7;
            max-width: 800px;
            margin: 0 auto;
            padding: 0;
            color: #1a1a1a;
            background-color: #ffffff;
            font-size: 16px;
            font-weight: 400;
        }
        
        .container {
            padding: 40px 20px;
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 300;
            color: #1a1a1a;
            margin-bottom: 40px;
            letter-spacing: -0.02em;
            line-height: 1.2;
        }
        
        h2 {
            font-size: 1.5rem;
            font-weight: 500;
            color: #1a1a1a;
            margin: 25px 0 15px 0;
            letter-spacing: -0.01em;
        }
        
        h3 {
            font-size: 1.25rem;
            font-weight: 500;
            color: #1a1a1a;
            margin: 20px 0 12px 0;
        }
        
        h4 {
            font-size: 1.1rem;
            font-weight: 500;
            color: #1a1a1a;
            margin: 18px 0 10px 0;
        }
        
        p {
            margin-bottom: 16px;
            color: #4a4a4a;
        }
        
        .support-box {
            background-color: #EBF3FF;
            border: 1px solid #C6E7FF;
            border-radius: 12px;
            padding-bottom: 16px;
            padding-right: 16px;
            padding-left: 16px;
            margin: 25px 0;
            position: relative;
        }
        
        .code-container {
            position: relative;
            margin: 20px 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
        }
        
        .code-block {
            padding: 20px;
            border-radius: 16px;
            padding-top: 50px;
            overflow-x: auto;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre-wrap;
            color: #24292e;
        }
        
        .copy-button {
            position: absolute;
            top: 12px;
            right: 12px;
            background-color: #e3f2fd;
            color: #1976d2;
            border: 1px solid #bbdefb;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            font-family: inherit;
            transition: all 0.2s ease;
        }
        
        .copy-button:hover {
            background-color: #bbdefb;
            border-color: #90caf9;
            color: #1565c0;
        }
        
        .copy-button.copied {
            background-color: #e8f5e8;
            border-color: #81c784;
            color: #2e7d32;
        }
        
        .inline-code {
            background-color: #f0f7ff;
            padding: 4px 8px;
            border-radius: 6px;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
            font-size: 0.9em;
            color: #1565c0;
            border: 1px solid #e1f5fe;
        }
        
        ol, ul {
            margin: 16px 0;
            padding-left: 20px;
        }
        
        ol {
            list-style: none;
            counter-reset: step-counter;
        }
        
        ol li {
            counter-increment: step-counter;
            margin: 10px 0;
            color: #4a4a4a;
        }
        
        ol li::before {
            display: none;
        }
        
        strong {
            color: #1a1a1a;
            font-weight: 600;
        }
        
        .step-number {
            display: inline-block;
            width: auto;
            height: auto;
            background-color: transparent;
            border: none;
            border-radius: 0;
            text-align: left;
            line-height: normal;
            font-size: 16px;
            font-weight: 600;
            color: #1a1a1a;
            margin-right: 8px;
        }
        
        .step-content {
            display: inline-block;
            vertical-align: top;
            width: calc(100% - 30px);
        }
        
        .warning {
            background-color: #fff8e1;
            border: 1px solid #ffcc02;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }
        
        .warning p, .warning ul {
            margin-left: 25px;
        }

        .book-call-button {
            background-color: #000000;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 12px;
            cursor: pointer;
            margin-top: 5px;
            transition: all 0.2s ease;
        }

        .book-call-button:hover {
            background-color: #4C4C4C;
        }
        
        hr {
            border: none;
            height: 1px;
            background: linear-gradient(90deg, transparent 0%, #e3f2fd 50%, transparent 100%);
            margin: 30px 0;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 40px 20px;
            }
            
            h1 {
                font-size: 2rem;
                margin-bottom: 40px;
            }
            
            .support-box, .warning {
                padding: 24px;
            }
            
            .code-block {
                padding: 20px;
                padding-top: 50px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Enable Strike-through Price On Collection Product Cards</h1>

        <div class="support-box">
            <h2>Getting Help</h2>
            <p>We strongly recommend contacting our support team for step-by-step guidance. You can:</p>
            <ul>
                <li>Use the <strong>Live chat</strong> button in the <strong>AIOD app</strong></li>
                <li>Email us at <strong>aiod-app@dtcdevelopers.org</strong></li>
                <li><button class="book-call-button" onclick="openBookCall()">Book a call</button></li>
            </ul>
            <p>If you prefer to follow the setup yourself, use the instructions below.</p>
        </div>

        <hr>

        <h2>Step 1: Create the Price Crossout Snippet</h2>

        <ol>
            <li><span class="step-number">1.</span><span class="step-content">Navigate to your <strong>store theme code editor</strong></span></li>
            <li><span class="step-number">2.</span><span class="step-content">Right-click on the <strong>"snippets"</strong> folder</span></li>
            <li><span class="step-number">3.</span><span class="step-content">Click <strong>"New file"</strong></span></li>
            <li><span class="step-number">4.</span><span class="step-content">Name the file: <span class="inline-code">aiod-price-crossout.liquid</span></span></li>
            <li><span class="step-number">5.</span><span class="step-content">Paste the following code into the newly created file:</span></li>
        </ol>

        <div class="code-container">
            <button class="copy-button" onclick="copyCode(this)">Copy</button>
            <div class="code-block">{%- liquid 
  assign target = product
  assign available = target.available | default: false
  assign original_display_price = target.price
-%}

{%- unless target == null -%}
  {%- if available -%}
    &lt;div product-id="{{ product.id }}"
        product-price= "{{ product.price | json }}"
        aiod-product-collections="{{ product.collections | map: 'id' | join: ',' }}" 
        aiod-product-variants="{{ product.variants | map: 'id' | join: ',' }}" 
        class="aiod-card-price-container price"&gt;
      
      &lt;span class="price-item price-item-regular aiod-original-price"&gt;
        {% if settings.currency_code_enabled %}
          {{ original_display_price | money_with_currency }}
        {% else %}
          {{ original_display_price | money }}
        {% endif %}
      &lt;/span&gt;
      
      &lt;span class="price-item price-item-sale aiod-discounted-price"&gt;&lt;/span&gt;
      &lt;span class="aiod-discount-badge"&gt;&lt;/span&gt;
    &lt;/div&gt;

    &lt;script&gt;
      function hideOriginalProductPrice{{ product.id }}() {
        const aiodPriceContainer = document.querySelector(".aiod-card-price-container[product-id='{{ product.id }}']");
        const parentContainer = aiodPriceContainer.closest('.card-information');
        
        if(parentContainer){
          // Remove ALL original price elements
          const originalPrices = parentContainer.querySelectorAll('div.price:not(.aiod-card-price-container)');
          originalPrices.forEach(price =&gt; price.remove());
        }
        
        const wholeCardParentContainer = aiodPriceContainer.closest('.card-wrapper');
        if(wholeCardParentContainer){
          wholeCardParentContainer.classList.add('aiod-product-card-wrapper');
        }
      }

      // Execute immediately after DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', hideOriginalProductPrice{{ product.id }});
      } else {
        hideOriginalProductPrice{{ product.id }}();
      }
    &lt;/script&gt;
  {%- endif -%}
{% endunless %}</div>
        </div>

        <ol start="6">
            <li><span class="step-number">6.</span><span class="step-content">Click <strong>"Save"</strong></span></li>
        </ol>

        <h2>Step 2: Add the Snippet to Your Theme</h2>

        <h3>For Official Shopify Themes (themes that are built by Shopify):</h3>

        <ol>
            <li><span class="step-number">1.</span><span class="step-content">In the same <strong>"snippets"</strong> folder, locate and open <span class="inline-code">card-product.liquid</span></span></li>
            <li><span class="step-number">2.</span><span class="step-content">Inside this file use the search function:
                <ul>
                    <li><strong>Mac</strong>: Press <span class="inline-code">Command+F</span></li>
                    <li><strong>Windows</strong>: Press <span class="inline-code">Ctrl+F</span></li>
                </ul>
            </span></li>
            <li><span class="step-number">3.</span><span class="step-content">Search for: <span class="inline-code">render 'price'</span></span></li>
            <li><span class="step-number">4.</span><span class="step-content">You should find 2 instances of this line</span></li>
            <li><span class="step-number">5.</span><span class="step-content"><strong>Below each line</strong>, paste the following code:</span></li>
        </ol>

        <div class="code-container">
            <button class="copy-button" onclick="copyCode(this)">Copy</button>
            <div class="code-block">{% render 'aiod-price-crossout', product: card_product %}</div>
        </div>

        <ol start="6">
            <li><span class="step-number">6.</span><span class="step-content">Click <strong>"Save"</strong></span></li>
        </ol>

        <h3>For Custom/Third-party Themes:</h3>

        <p>If you're using a custom or third-party theme, you need to:</p>

        <ol>
            <li><span class="step-number">1.</span><span class="step-content">Identify the file that renders your product collection pages</span></li>
            <li><span class="step-number">2.</span><span class="step-content">Add the following line in the appropriate location:</span></li>
        </ol>

        <div class="code-container">
            <button class="copy-button" onclick="copyCode(this)">Copy</button>
            <div class="code-block">{% render 'aiod-price-crossout', product: card_product %}</div>
        </div>

        <div class="warning">
            <strong>Need help?</strong> Contact our support team - we'll help you identify the correct file and placement.
        </div>

        <div class="support-box">
            <h2>Support</h2>
            <p>For any questions or assistance with setup, please contact our support team:</p>
            <ul>
                <li><strong>Live Chat</strong>: Use the chat button in the <strong>AIOD app</strong></li>
                <li><strong>Email</strong>: aiod-app@dtcdevelopers.org</li>
                <li><button class="book-call-button" onclick="openBookCall()">Book a call</button></li>
            </ul>
            <p>We're here to help you get set up quickly and correctly!</p>
        </div>
    </div>

    <script>
        // Constants
        const BOOK_CALL_LINK = 'https://cal.com/aiod-support/30min';
        
        function copyCode(button) {
            // Find the code block - it could be nextElementSibling or we need to look for it
            let codeBlock = button.nextElementSibling;
            
            // If nextElementSibling is not a code block, look for it in the parent container
            if (!codeBlock || !codeBlock.classList.contains('code-block')) {
                const container = button.closest('.code-container');
                codeBlock = container.querySelector('.code-block');
            }
            
            if (!codeBlock) {
                console.error('Code block not found');
                return;
            }
            
            const textArea = document.createElement('textarea');
            textArea.value = codeBlock.textContent;
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                button.textContent = 'Copied!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.classList.remove('copied');
                }, 2000);
            } catch (err) {
                console.error('Failed to copy: ', err);
                button.textContent = 'Failed!';
                setTimeout(() => {
                    button.textContent = 'Copy';
                }, 2000);
            } finally {
                document.body.removeChild(textArea);
            }
        }
        
        function openBookCall() {
            window.open(BOOK_CALL_LINK, '_blank');
        }
    </script>
</body>
</html>
